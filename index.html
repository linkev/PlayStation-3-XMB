<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PlayStation 3 XMB Recreation</title>
    <link rel="icon" type="image/svg+xml" href="favicon.ico">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- Loading indicator -->
    <div id="loading" class="loading">
        <div class="spinner"></div>
        <p>Initializing XMB...</p>
    </div>
    <!-- Waves Canvas -->
    <canvas id="waves-background"></canvas>
    <!-- Stats Container -->
    <div id="stats-container"></div>
    <!-- Interface -->
    <div class="interface">
        <!-- PlayStation Logo (Upper Left) -->
        <div class="ps-logo-container left">
            <img src="playstation.svg" alt="PlayStation" class="ps-logo-svg">
        </div>
        <!-- PS3 Logo (Upper Right) -->
        <div class="ps-logo-container right">
            <img src="ps3.svg" alt="PlayStation 3" class="ps-logo-svg">
        </div>
        <!-- Right Panel with Gradient -->
        <div class="right-panel">
            <!-- Date/Time -->
            <div class="datetime-section">
                <div id="current-time">12:00</div>
                <div id="current-date">Wednesday, January 1, 2025</div>
            </div>
            <!-- Information Blocks -->
            <div class="info-section">
                <h2 id="info-title">PlayStation 3 XMB Wave System</h2>
                <div id="info-description">
                    <p>Kind of a technical recreation of the PlayStation 3 XrossMediaBar wave rendering engine using
                        WebGL and regl. Why does this exist? Just for fun Â¯\_(ãƒ„)_/Â¯</p>
                    <div class="feature-highlights">
                        <div class="highlight">
                            <h3>ðŸŽ® Semi-Authentic Experience</h3>
                            <p>Recreation using original PlayStation 3 XMB design and visual effects</p>
                        </div>
                        <div class="highlight">
                            <h3>âš¡ WebGL Acceleration</h3>
                            <p>GPU-accelerated rendering with adaptive performance optimization</p>
                        </div>
                        <div class="highlight">
                            <h3>ðŸŒŠ Dynamic Waves</h3>
                            <p>Real-time wave physics with noise functions almost matching the PlayStation 3 XMB behavior</p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Settings Panel -->
            <div class="settings-section">
                <h3>Wave Configuration</h3>
                <form id="waves-config" class="waves-config-form"></form>
            </div>
            <!-- Interface Control -->
            <div class="interface-control">
                <button id="hide-interface-btn" class="hide-interface-btn"
                    title="Click to hide all interface elements. Click anywhere on the screen to show them again.">
                    Hide Interface
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <!-- <script src="https://unpkg.com/regl@2.1.1/dist/regl.min.js"></script> -->
    <script src="js/regl-2.1.1.min.js"></script>
    <!-- <script src="https://unpkg.com/stats.js@0.17.0/build/stats.min.js"></script> -->
    <script src="js/stats-0.17.0.min.js"></script>
    <script type="module" src="waves/waves-core.js"></script>
    <script src="waves/waves-controller.js"></script>
    <script>
        // Initialize the system
        document.addEventListener('DOMContentLoaded', () => {
            const loading = document.getElementById('loading');
            // Update time display
            function updateTime() {
                const now = new Date();
                const timeStr = now.toLocaleTimeString('en-US', {
                    hour: '2-digit',
                    minute: '2-digit',
                    hour12: false
                });
                const dateStr = now.toLocaleDateString('en-US', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                document.getElementById('current-time').textContent = timeStr;
                document.getElementById('current-date').textContent = dateStr;
            }
            updateTime();
            setInterval(updateTime, 1000);
            // Check if waves are ready
            const checkReady = () => {
                if (window.ps3Waves?.isReady) {
                    loading.classList.add('hidden');
                    // Auto-start waves
                    window.ps3Waves.start();
                } else {
                    setTimeout(checkReady, 100);
                }
            };
            checkReady();
        });
    </script>
</body>

</html>